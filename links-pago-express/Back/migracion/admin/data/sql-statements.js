// QUERIES DE SQL

export class SQLStatements {

    constructor() {
        this.sqlPermLinks = 'SELECT `ID_SO`, row_number() over() as "ROW_NUMBER", `SO_NOTES`, `USR_LOGIN_NAME`, unix_timestamp(MAX(`SOPAYS_PAID_TS`)) as SOPAYS_PAID_TS, unix_timestamp(MAX(`SOPAYS_NOTIFY_TS`)) as SOPAYS_NOTIFY_TS, unix_timestamp(`SO_DATE`) as SO_DATE_TS, unix_timestamp(`SO_CREATE_TS`) as SO_CREATE_TS, unix_timestamp(`SO_LAST_UPDATE`) as SO_LAST_UPDATE_TS, unix_timestamp(`SOTR_LAST_UPDATE`) as SOTR_LAST_UPDATE_TS, unix_timestamp(`WHM_LAST_UPDATE`) as WHM_LAST_UPDATE_TS, `PARS_NAME`, `SOTR_MASTER`, count(distinct `ID_SOSKU`) as "ID_SOSKU_count", sum(distinct `SOSKU_QTY`) as "SOSKU_QTY_sum", `SO_SUBTOTAL`, `SO_STATUS`, ifnull(`WHM_STATUS`,\'P\') as "WHM_STATUS_inull", `SOTR_STATUS` FROM SALES_ORDERS_SO so JOIN USERS_USR using(ID_USR) JOIN SO_HAS_PAYLINKS sop using(ID_SO) LEFT JOIN SO_TRACKINGS_SOTR using(ID_SO) LEFT JOIN PARCEL_SUPPLIERS_PARS using(ID_PARS) LEFT JOIN WAREHOUSEMOVES_WHM using(ID_SO) LEFT JOIN SO_HAS_SKU using(ID_SO) WHERE SO_TYPE=? GROUP BY ID_SO ORDER BY SO_CREATE_TS DESC LIMIT ?,?';

        this.sqlLinksByPermlink = 'SELECT `ID_SO`, `SOPAYS_STATUS` FROM SALES_ORDERS_SO INNER JOIN SO_HAS_PAYLINKS USING(`ID_SO`) WHERE SO_TYPE=? ORDER BY SO_CREATE_TS DESC LIMIT ?,?'

        this.sqlPaymentInfo = 'SELECT `ID_SOPAYS`, `ID_PAYS`, `SOPAYS_PERMALINK`, `SOPAYS_INTERNAL_ID`, `SOPAYS_AMOUNT`, `SOPAYS_STATUS`, `SOPAYS_DEADLINE` FROM SO_HAS_PAYLINKS WHERE `ID_SO`=?';

        this.sqlShippingInfo = 'SELECT `WHM_STATUS`, unix_timestamp(`WHM_LAST_UPDATE`) as WHM_LAST_UPDATE_TS FROM WAREHOUSEMOVES_WHM WHERE `ID_SO`=?';

        this.sqlTotalLinks = `SELECT COUNT(*) FROM SALES_ORDERS_SO WHERE SO_TYPE=?`;

        this.sqlAllParcelSuppliers = 'SELECT `PARS_NAME` FROM PARCEL_SUPPLIERS_PARS';

        this.sqlUpdateStatus = 'UPDATE ?? SET ??=? WHERE `ID_SO`=?';

        this.sqlLogin = 'SELECT `ID_USR`, `USR_STATUS` FROM USERS_USR WHERE `USR_LOGIN_NAME`=? AND `USR_PASSWORD`=?';

        this.sqlUAuth = 'SELECT `ID_USR`, `USR_LOGIN_NAME`, `USR_STATUS`, `ID_SYSR` FROM USERS_USR JOIN USR_has_SYSR USING(`ID_USR`) JOIN SYSTEM_ROLES_SYSR USING(ID_SYSR) WHERE `ID_USR`=?';
    }
}
